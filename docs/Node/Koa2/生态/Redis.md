## 什么是Redis

Redis （Remote Dictionary Server） 是一个使用 C 语言写成的，开源的 key-value 数据库（基于内存、可选持久性的键值对存储数据库）。

## Redis VS Memcached

和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hash（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。

在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。目前，Vmware在资助着redis项目的开发和维护。

此外单个value的最大限制是1GB，不像 memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能，比方说用他的List来做FIFO双向链表，实现一个轻量级的高性 能消息队列服务，用他的Set可以做高性能的tag系统等等。

另外Redis也可以对存入的Key-Value设置expire时间，因此也可以被当作一 个功能加强版的memcached来用。 Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。


## redis特性目录

* 速度快
* 持久化
* 多种数据结构
* 支持多种编程语言
* 功能丰富
* 简单：代码短小精悍
* 主从复制
* 高可用、分布式


## 内存数据库 VS 硬盘数据库

redis这种内存数据库的速度是传统硬盘数据库的数量级倍，但内存资源比较硬盘贵的多，需要合理使用分配

## Redis的应用

### 缓存

毫无疑问这是Redis当今最为人熟知的使用场景。再提升服务器性能方面非常有效；
我们用来验证身份的session就非常适合存储到redis里，因为session访问频繁，对性能要求高，且session比较与其他的用户媒体数据小的多，如果服务器断点宕机内存数据虽然会丢失但不影响session，重新登录就行了。

### 排行榜

如果使用传统的关系型数据库来做这个事儿，非常的麻烦，而利用Redis的SortSet数据结构能够非常方便搞定；

### 计算器/限速器

利用Redis中原子性的自增操作，我们可以统计类似用户点赞数、用户访问数等，这类操作如果用MySQL，频繁的读写会带来相当大的压力；限速器比较典型的使用场景是限制某个用户访问某个API的频率，常用的有抢购时，防止用户疯狂点击带来不必要的压力；

### 好友关系

利用集合的一些命令，比如求交集、并集、差集等。可以方便搞定一些共同好友、共同爱好之类的功能；
### 简单消息队列

除了Redis自身的发布/订阅模式，我们也可以利用List来实现一个队列机制，比如：到货通知、邮件发送之类的需求，不需要高可靠，但是会带来非常大的DB压力，完全可以用List来完成异步解耦；
### Session共享

以PHP为例，默认Session是保存在服务器的文件中，如果是集群服务，同一个用户过来可能落在不同机器上，这就会导致用户频繁登陆；采用Redis保存Session后，无论用户落在那台机器上都能够获取到对应的Session信息。


### Redis不能干什么事儿


比如，用Redis去保存用户的基本信息，虽然它能够支持持久化，但是它的持久化方案并不能保证数据绝对的落地，并且还可能带来Redis性能下降，因为持久化太过频繁会增大Redis服务的压力。
简单总结就是数据量太大、数据访问频率非常低的业务都不适合使用Redis，数据太大会增加成本，访问频率太低，保存在内存中纯属浪费资源。

## 参考

- Redis从入门到实践https://juejin.im/post/5a912b3f5188257a5c608729